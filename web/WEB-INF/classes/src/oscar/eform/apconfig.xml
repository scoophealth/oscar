<eformap-config>
<!-- OLD IMPORTED EFORM APs -->
	<databaseap>
		<ap-name>patient_name</ap-name>
		<ap-sql>SELECT * FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${last_name}, ${first_name}</ap-output>
	</databaseap>
        <databaseap>
		<ap-name>first_last_name</ap-name>
		<ap-sql>SELECT CONCAT(UPPER(SUBSTRING(first_name, 1, 1)), LOWER(SUBSTRING(first_name FROM 2))) AS first_name, CONCAT(UPPER(SUBSTRING(last_name, 1, 1)), LOWER(SUBSTRING(last_name FROM 2))) AS last_name FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${first_name} ${last_name}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>patient_nameL</ap-name>
		<ap-sql>SELECT last_name FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${last_name}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>patient_nameF</ap-name>
		<ap-sql>SELECT first_name FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${first_name}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>today</ap-name>
		<ap-sql>SELECT curdate()</ap-sql>
		<ap-output>${curdate()}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>label</ap-name>
		<ap-sql>SELECT * FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${last_name}, ${first_name}\n${address}\n${city}, ${province}, ${postal}\nHome: ${phone}\nWork: ${phone2}\n${date_of_birth}/${month_of_birth}/${year_of_birth} (${sex})\n${hin} ${ver}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>address</ap-name>
		<ap-sql>SELECT * FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${address}\n${city}, ${province}, ${postal}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>addressline</ap-name>
		<ap-sql>SELECT address, city, province, postal FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${address}, ${city}, ${province}, ${postal}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>province</ap-name>
		<ap-sql>SELECT province FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${province}</ap-output>
	</databaseap>
	<databaseap>
                <ap-name>city</ap-name>
                <ap-sql>SELECT city FROM demographic WHERE demographic_no=${demographic}</ap-sql>
                <ap-output>${city}</ap-output>
        </databaseap>
	<databaseap>
                <ap-name>postal</ap-name>
                <ap-sql>SELECT postal FROM demographic WHERE demographic_no=${demographic}</ap-sql>
                <ap-output>${postal}</ap-output>
        </databaseap>

	<databaseap>
		<ap-name>doctor</ap-name>
		<ap-sql>SELECT provider.last_name, provider.first_name FROM provider, demographic WHERE demographic.demographic_no=${demographic} AND demographic.provider_no=provider.provider_no</ap-sql>
		<ap-output>${last_name}, ${first_name}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>dob</ap-name>
		<ap-sql>SELECT date_of_birth, month_of_birth, year_of_birth FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${date_of_birth}/${month_of_birth}/${year_of_birth} (d/m/y)</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>dobc</ap-name>
		<ap-sql>SELECT date_of_birth, month_of_birth, year_of_birth FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${date_of_birth}/${month_of_birth}/${year_of_birth}</ap-output>
	</databaseap>
	<databaseap>
                <ap-name>dobc2</ap-name>
		<ap-sql>SELECT date_of_birth, month_of_birth, year_of_birth FROM demographic WHERE demographic_no=${demographic}</ap-sql>
                <ap-output>${year_of_birth}/${month_of_birth}/${date_of_birth}</ap-output>
        </databaseap>

	<databaseap>
		<ap-name>NameAddress</ap-name>
		<ap-sql>SELECT * FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${last_name}, ${first_name}\n${address}\n${postal},${province}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>hin</ap-name>
		<ap-sql>SELECT hin, ver FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${hin} ${ver}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>hinc</ap-name>
		<ap-sql>SELECT hin FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${hin}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>hinversion</ap-name>
		<ap-sql>SELECT ver FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${ver}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>phone</ap-name>
		<ap-sql>SELECT phone FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${phone}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>phone2</ap-name>
		<ap-sql>SELECT phone2 FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${phone2}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_name</ap-name>
		<ap-sql>SELECT clinic_name FROM clinic</ap-sql>
		<ap-output>${clinic_name}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_phone</ap-name>
		<ap-sql>SELECT clinic_phone FROM clinic</ap-sql>
		<ap-output>${clinic_phone}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_fax</ap-name>
		<ap-sql>SELECT clinic_fax FROM clinic</ap-sql>
		<ap-output>${clinic_fax}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_label</ap-name>
		<ap-sql>SELECT * FROM clinic</ap-sql>
		<ap-output>${clinic_name}\n${clinic_address}\n${clinic_city},${clinic_province},${clinic_postal}\nTel:${clinic_phone}\nFax:${clinic_fax}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_addressLine</ap-name>
		<ap-sql>SELECT clinic_address FROM clinic</ap-sql>
		<ap-output>${clinic_address}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_addressLineFull</ap-name>
		<ap-sql>SELECT * FROM clinic</ap-sql>
		<ap-output>${clinic_address}, ${clinic_city}, ${clinic_province}, ${clinic_postal}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_address</ap-name>
		<ap-sql>SELECT * FROM clinic</ap-sql>
		<ap-output>${clinic_address}\n${clinic_city},${clinic_postal}\n${clinic_province},Canada</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>clinic_address</ap-name>
		<ap-sql>SELECT * FROM clinic</ap-sql>
		<ap-output>${clinic_address}\n${clinic_city},${clinic_postal}\n${clinic_province},Canada</ap-output>
	</databaseap>
	<databaseap>
                <ap-name>clinic_city</ap-name>
                <ap-sql>SELECT * FROM clinic</ap-sql>
                <ap-output>${clinic_city}</ap-output>
	</databaseap>
	<databaseap>
                <ap-name>clinic_province</ap-name>
                <ap-sql>SELECT * FROM clinic</ap-sql>
                <ap-output>${clinic_province}</ap-output>
	</databaseap>

	 <databaseap>
                <ap-name>clinic_postal</ap-name>
                <ap-sql>SELECT * FROM clinic</ap-sql>
                <ap-output>${clinic_postal}</ap-output>
        </databaseap>



	<databaseap>
		<ap-name>social_family_history</ap-name>
		<ap-sql>SELECT socialHistory FROM eChart WHERE demographicNo=${demographic} ORDER BY eChartId DESC limit 1</ap-sql>
		<ap-output>${socialHistory}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>other_medications_history</ap-name>
		<ap-sql>SELECT familyHistory FROM eChart WHERE demographicNo=${demographic} ORDER BY eChartId DESC limit 1</ap-sql>
		<ap-output>${familyHistory}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>medical_history</ap-name>
		<ap-sql>SELECT medicalHistory FROM eChart WHERE demographicNo=${demographic} ORDER BY eChartId DESC limit 1</ap-sql>
		<ap-output>${medicalHistory}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>ongoingconcerns</ap-name>
		<ap-sql>SELECT ongoingConcerns FROM eChart WHERE demographicNo=${demographic} ORDER BY eChartId DESC limit 1</ap-sql>
		<ap-output>${ongoingConcerns}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>reminders</ap-name>
		<ap-sql>SELECT reminders FROM eChart WHERE demographicNo=${demographic} ORDER BY eChartId DESC limit 1</ap-sql>
		<ap-output>${reminders}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>age</ap-name>
		<ap-sql>SELECT (YEAR(CURRENT_DATE)-YEAR(DATE_FORMAT(CONCAT((demographic.year_of_birth), '-', (demographic.month_of_birth), '-', (demographic.date_of_birth)),'%Y-%m-%d')))-(RIGHT(CURRENT_DATE, 5) &lt; RIGHT(DATE_FORMAT(CONCAT((demographic.year_of_birth), '-', (demographic.month_of_birth), '-', (demographic.date_of_birth)),'%Y-%m-%d'),5)) AS 'age' FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${age}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>sex</ap-name>
		<ap-sql>SELECT sex FROM demographic WHERE demographic_no=${demographic}</ap-sql>
		<ap-output>${sex}</ap-output>
	</databaseap>
	<databaseap>
		<ap-name>provider_name</ap-name>
		<ap-sql>SELECT provider.last_name, provider.first_name 
                        FROM provider, demographic 
			WHERE demographic_no=${demographic} AND demographic.provider_no=provider.provider_no</ap-sql>
		<ap-output>${last_name}, ${first_name}</ap-output>
	</databaseap>
        
        
        <databaseap>
		<ap-name>provider_name_first_init</ap-name>
		<ap-sql>select  substring(provider.first_name,1,1) as first_init,provider.last_name 
                        FROM provider, demographic 
			WHERE demographic_no=${demographic} AND demographic.provider_no=provider.provider_no</ap-sql>
		<ap-output>${first_init}. ${last_name}</ap-output>
	</databaseap>
        
        
        
        <databaseap>
		<ap-name>current_user</ap-name>
		<ap-sql>SELECT provider.last_name, provider.first_name 
			FROM provider 
			WHERE provider.provider_no=${provider} </ap-sql>
		<ap-output>${last_name}, ${first_name}</ap-output>
	</databaseap>
        
        <databaseap>
		<ap-name>doctor_work_phone</ap-name>
		<ap-sql>SELECT provider.work_phone
			FROM provider, demographic 
			WHERE demographic.demographic_no=${demographic} AND demographic.provider_no=provider.provider_no</ap-sql>
		<ap-output>${work_phone}</ap-output>
	</databaseap>

</eformap-config>
